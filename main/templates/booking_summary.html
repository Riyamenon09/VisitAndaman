{% extends "base.html" %}
{% block title %}Booking Summary – {{ booking.hotel.name }}{% endblock %}

{% block content %}
<div class="container my-4">
  {% if messages %}
    {% for m in messages %}
      <div class="alert alert-success">{{ m }}</div>
    {% endfor %}
  {% endif %}

  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h4 class="mb-3">Thank you, {{ booking.first_name }}!</h4>
          <p class="text-muted mb-0">Your booking details are below. You can download your invoice as a PDF.</p>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="mb-3">Guest & Stay</h5>
          <div class="row">
            <div class="col-md-6">
              <p class="mb-1"><strong>Hotel:</strong> {{ booking.hotel.name }}</p>
              <p class="mb-1"><strong>Guest:</strong> {{ booking.first_name }} {{ booking.last_name }}</p>
              <p class="mb-1"><strong>Email:</strong> {{ booking.email }}</p>
              <p class="mb-1"><strong>Phone:</strong> {{ booking.phone }}</p>
            </div>
            <div class="col-md-6">
              <p class="mb-1"><strong>Check-in:</strong> {{ booking.check_in }}</p>
              <p class="mb-1"><strong>Check-out:</strong> {{ booking.check_out }}</p>
              <p class="mb-1"><strong>Rooms:</strong> {{ booking.rooms }}</p>
              <p class="mb-1"><strong>Guests:</strong> {{ booking.adults }} adults, {{ booking.children }} children {% if booking.child_ages_csv %}({{ booking.child_ages_csv }}){% endif %}</p>
            </div>
          </div>

          <hr>
          <div class="d-flex justify-content-between align-items-center">
            <div class="fw-semibold">Total</div>
            <div class="fs-4 fw-bold">₹{{ booking.computed_total|floatformat:0 }}</div>
          </div>
        </div>
      </div>

      <div class="d-flex gap-2 mt-3">
        <a class="btn btn-success" href="{% url 'booking_invoice_pdf' booking.id %}">
          Download Invoice (PDF)
        </a>
        <a class="btn btn-outline-secondary" href="{% url 'hotel_detail' booking.hotel.id %}">
          Back to Hotel
        </a>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body">
          {% if booking.hotel.image %}
            <img src="{{ booking.hotel.image.url }}" class="img-fluid rounded mb-2" style="max-height:180px;object-fit:cover;">
          {% endif %}
          <div class="fw-semibold">{{ booking.hotel.name }}</div>
          {% if booking.hotel.address %}<div class="text-muted small">{{ booking.hotel.address }}</div>{% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
